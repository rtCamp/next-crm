import{m as $,h as R,i as x,j as V,s as T,k as N,l as P,r as h,b as t,c as r,d as i,w as d,u,F as B,f as D,g as m,n as y,p,q as S,e as j,t as F}from"./index-8ca2d158.js";import{_ as H,H as L,a as E,b as J,c as G,d as K,e as Q}from"./ListBulkActions-ccdc1c2a.js";import{_ as X}from"./statuses-6fc48ca5.js";import{I as Y}from"./IndicatorIcon-367a8d49.js";import{P as Z}from"./PhoneIcon-42af6989.js";import{_ as ee}from"./ListRows-7339a2c3.js";import{b as M,_ as te}from"./index-b1bb6af7.js";import{_ as se}from"./Dropdown.vue_vue_type_script_setup_true_lang-dba778cd.js";import{_ as oe}from"./ListFooter-ed664a38.js";const le={key:0,class:"flex items-center"},ae={key:0},ie={key:1},ne={key:2},re={key:3},ue={key:4},de=["onClick"],ce={key:1,class:"truncate text-base"},me={key:2},pe=["onClick"],ge={__name:"OpportunitiesListView",props:$({rows:{type:Array,required:!0},columns:{type:Array,required:!0},options:{type:Object,default:()=>({selectable:!0,showTooltip:!0,resizeColumn:!1,totalCount:0,rowCount:0})}},{modelValue:{},modelModifiers:{},list:{},listModifiers:{}}),emits:$(["loadMore","updatePageCount","columnWidthUpdated","applyFilter","applyLikeFilter","likeDoc"],["update:modelValue","update:list"]),setup(a,{expose:z,emit:A}){const c=A,w=R(),k=x(a,"modelValue"),_=x(a,"list"),U=V(()=>{var n,l;return!!((l=(n=_.value.params)==null?void 0:n.filters)!=null&&l._liked_by)}),{user:I}=T();function g(n){if(n)return JSON.parse(n).includes(I)}N(k,(n,l)=>{n!==l&&c("updatePageCount",n)});const C=P(null);return z({customListActions:V(()=>{var n;return(n=C.value)==null?void 0:n.customListActions})}),(n,l)=>{const v=h("Button"),W=h("Badge"),q=h("FormControl");return t(),r(B,null,[i(u(K),{class:y(n.$attrs.class),columns:a.columns,rows:a.rows,options:{getRowRoute:s=>({name:"Opportunity",params:{opportunityId:s.name},query:{view:u(w).query.view,viewType:u(w).params.viewType}}),selectable:a.options.selectable,showTooltip:a.options.showTooltip,resizeColumn:a.options.resizeColumn},"row-key":"name"},{default:d(()=>[i(u(H),{class:"sm:mx-5 mx-3",onColumnWidthUpdated:l[1]||(l[1]=s=>c("columnWidthUpdated"))},{default:d(()=>[(t(!0),r(B,null,D(a.columns,s=>(t(),m(u(E),{key:s.key,item:s,onColumnWidthUpdated:o=>c("columnWidthUpdated",s)},{default:d(()=>[s.key=="_liked_by"?(t(),m(v,{key:0,variant:"ghosted",class:y(["!h-4",U.value?"fill-red-500":"fill-white"]),onClick:l[0]||(l[0]=()=>c("applyLikeFilter"))},{default:d(()=>[i(L,{class:"h-4 w-4"})]),_:1},8,["class"])):p("",!0)]),_:2},1032,["item","onColumnWidthUpdated"]))),128))]),_:1}),i(ee,{rows:a.rows},{default:d(({idx:s,column:o,item:e,row:O})=>[o.key==="_assign"?(t(),r("div",le,[i(X,{avatars:e,size:"sm",onClick:b=>c("applyFilter",{event:b,idx:s,column:o,item:e,firstColumn:a.columns[0]})},null,8,["avatars","onClick"])])):(t(),m(u(J),{key:1,item:e},{prefix:d(()=>[o.key==="status"?(t(),r("div",ae,[i(Y,{class:y(e.color)},null,8,["class"])])):o.key==="customer"?(t(),r("div",ie,[e.label?(t(),m(u(M),{key:0,class:"flex items-center",image:e.logo,label:e.label,size:"sm"},null,8,["image","label"])):p("",!0)])):o.key==="opportunity_owner"?(t(),r("div",ne,[e.full_name?(t(),m(u(M),{key:0,class:"flex items-center",image:e.user_image,label:e.full_name,size:"sm"},null,8,["image","label"])):p("",!0)])):o.key==="mobile_no"?(t(),r("div",re,[i(Z,{class:"h-4 w-4"})])):o.key==="_liked_by"?(t(),r("div",ue,[o.key=="_liked_by"?(t(),m(v,{key:0,variant:"ghosted",class:y(g(e)?"fill-red-500":"fill-white"),onClick:S(()=>c("likeDoc",{name:O.name,liked:g(e)}),["stop","prevent"])},{default:d(()=>[i(L,{class:"h-4 w-4"})]),_:2},1032,["class","onClick"])):p("",!0)])):p("",!0)]),default:d(({label:b})=>[["modified","creation","first_response_time","first_responded_on","response_by"].includes(o.key)?(t(),r("div",{key:0,class:"truncate text-base",onClick:f=>c("applyFilter",{event:f,idx:s,column:o,item:e,firstColumn:a.columns[0]})},[i(u(te),{text:e.label},{default:d(()=>[j("div",null,F(e.timeAgo),1)]),_:2},1032,["text"])],8,de)):o.key==="sla_status"?(t(),r("div",ce,[e.value?(t(),m(W,{key:0,variant:"subtle",theme:e.color,size:"md",label:e.value,onClick:f=>c("applyFilter",{event:f,idx:s,column:o,item:e,firstColumn:a.columns[0]})},null,8,["theme","label","onClick"])):p("",!0)])):o.type==="Check"?(t(),r("div",me,[i(q,{type:"checkbox",modelValue:e,disabled:!0,class:"text-gray-900"},null,8,["modelValue"])])):(t(),r("div",{key:3,class:"truncate text-base",onClick:f=>c("applyFilter",{event:f,idx:s,column:o,item:e,firstColumn:a.columns[0]})},F(b),9,pe))]),_:2},1032,["item"]))]),_:1},8,["rows"]),i(u(G),null,{actions:d(({selections:s,unselectAll:o})=>[i(u(se),{options:C.value.bulkActions(s,o)},{default:d(()=>[i(v,{icon:"more-horizontal",variant:"ghost"})]),_:2},1032,["options"])]),_:1})]),_:1},8,["class","columns","rows","options"]),k.value?(t(),m(u(oe),{key:0,class:"border-t sm:px-5 px-3 py-2",modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=s=>k.value=s),options:{rowCount:a.options.rowCount,totalCount:a.options.totalCount},onLoadMore:l[3]||(l[3]=s=>c("loadMore"))},null,8,["modelValue","options"])):p("",!0),i(Q,{ref_key:"listBulkActionsRef",ref:C,modelValue:_.value,"onUpdate:modelValue":l[4]||(l[4]=s=>_.value=s),doctype:"Opportunity"},null,8,["modelValue"])],64)}}};export{ge as _};
//# sourceMappingURL=OpportunitiesListView-bab2c24d.js.map
