import{m as x,h as N,i as $,j as V,s as P,k as D,l as I,r as A,b as t,c as u,d as n,w as r,u as l,F as v,f as B,g as m,n as w,p as f,e as S,t as F,q as j}from"./index-8ca2d158.js";import{_ as H,H as L,a as O,f as E,b as J,g as G,c as K,d as Q,e as X}from"./ListBulkActions-ccdc1c2a.js";import{P as Y}from"./PhoneIcon-42af6989.js";import{b as M,_ as Z}from"./index-b1bb6af7.js";import{_ as ee}from"./Dropdown.vue_vue_type_script_setup_true_lang-dba778cd.js";import{_ as te}from"./ListFooter-ed664a38.js";const se={key:0},oe={key:1},le={key:2},ae=["onClick"],ie={key:1},ne={key:2},re=["onClick"],ke={__name:"ContactsListView",props:x({rows:{type:Array,required:!0},columns:{type:Array,required:!0},options:{type:Object,default:()=>({selectable:!0,showTooltip:!0,resizeColumn:!1,totalCount:0,rowCount:0})}},{modelValue:{},modelModifiers:{},list:{},listModifiers:{}}),emits:x(["loadMore","updatePageCount","columnWidthUpdated","applyFilter","applyLikeFilter","likeDoc"],["update:modelValue","update:list"]),setup(a,{expose:U,emit:z}){const c=z,h=N(),k=$(a,"modelValue"),y=$(a,"list"),W=V(()=>{var i,s;return!!((s=(i=y.value.params)==null?void 0:i.filters)!=null&&s._liked_by)}),{user:q}=P();function g(i){if(i)return JSON.parse(i).includes(q)}D(k,(i,s)=>{i!==s&&c("updatePageCount",i)});const _=I(null);return U({customListActions:V(()=>{var i;return(i=_.value)==null?void 0:i.customListActions})}),(i,s)=>{const C=A("Button"),R=A("FormControl");return t(),u(v,null,[n(l(Q),{class:w(i.$attrs.class),columns:a.columns,rows:a.rows,options:{getRowRoute:e=>({name:"Contact",params:{contactId:e.name},query:{view:l(h).query.view,viewType:l(h).params.viewType}}),selectable:a.options.selectable,showTooltip:a.options.showTooltip,resizeColumn:a.options.resizeColumn},"row-key":"name"},{default:r(()=>[n(l(H),{class:"mx-3 sm:mx-5",onColumnWidthUpdated:s[1]||(s[1]=e=>c("columnWidthUpdated"))},{default:r(()=>[(t(!0),u(v,null,B(a.columns,e=>(t(),m(l(O),{key:e.key,item:e,onColumnWidthUpdated:p=>c("columnWidthUpdated",e)},{default:r(()=>[e.key=="_liked_by"?(t(),m(C,{key:0,variant:"ghosted",class:w(["!h-4",W.value?"fill-red-500":"fill-white"]),onClick:s[0]||(s[0]=()=>c("applyLikeFilter"))},{default:r(()=>[n(L,{class:"h-4 w-4"})]),_:1},8,["class"])):f("",!0)]),_:2},1032,["item","onColumnWidthUpdated"]))),128))]),_:1}),n(l(E),{class:"mx-3 sm:mx-5",id:"list-rows"},{default:r(()=>[(t(!0),u(v,null,B(a.rows,e=>(t(),m(l(G),{key:e.name,row:e},{default:r(({idx:p,column:d,item:o})=>[n(l(J),{item:o},{prefix:r(()=>[d.key==="full_name"?(t(),u("div",se,[o.label?(t(),m(l(M),{key:0,class:"flex items-center",image:o.image,label:o.image_label,size:"sm"},null,8,["image","label"])):f("",!0)])):d.key==="company_name"?(t(),u("div",oe,[o.label?(t(),m(l(M),{key:0,class:"flex items-center",image:o.logo,label:o.label,size:"sm"},null,8,["image","label"])):f("",!0)])):d.key==="mobile_no"?(t(),u("div",le,[n(Y,{class:"h-4 w-4"})])):f("",!0)]),default:r(({label:T})=>[["modified","creation"].includes(d.key)?(t(),u("div",{key:0,class:"truncate text-base",onClick:b=>c("applyFilter",{event:b,idx:p,column:d,item:o,firstColumn:a.columns[0]})},[n(l(Z),{text:o.label},{default:r(()=>[S("div",null,F(o.timeAgo),1)]),_:2},1032,["text"])],8,ae)):d.type==="Check"?(t(),u("div",ie,[n(R,{type:"checkbox",modelValue:o,disabled:!0,class:"text-gray-900"},null,8,["modelValue"])])):d.key==="_liked_by"?(t(),u("div",ne,[d.key=="_liked_by"?(t(),m(C,{key:0,variant:"ghosted",class:w(g(o)?"fill-red-500":"fill-white"),onClick:j(()=>c("likeDoc",{name:e.name,liked:g(o)}),["stop","prevent"])},{default:r(()=>[n(L,{class:"h-4 w-4"})]),_:2},1032,["class","onClick"])):f("",!0)])):(t(),u("div",{key:3,class:"truncate text-base",onClick:b=>c("applyFilter",{event:b,idx:p,column:d,item:o,firstColumn:a.columns[0]})},F(T),9,re))]),_:2},1032,["item"])]),_:2},1032,["row"]))),128))]),_:1}),n(l(K),null,{actions:r(({selections:e,unselectAll:p})=>[n(l(ee),{options:_.value.bulkActions(e,p)},{default:r(()=>[n(C,{icon:"more-horizontal",variant:"ghost"})]),_:2},1032,["options"])]),_:1})]),_:1},8,["class","columns","rows","options"]),k.value?(t(),m(l(te),{key:0,class:"border-t px-3 py-2 sm:px-5",modelValue:k.value,"onUpdate:modelValue":s[2]||(s[2]=e=>k.value=e),options:{rowCount:a.options.rowCount,totalCount:a.options.totalCount},onLoadMore:s[3]||(s[3]=e=>c("loadMore"))},null,8,["modelValue","options"])):f("",!0),n(X,{ref_key:"listBulkActionsRef",ref:_,modelValue:y.value,"onUpdate:modelValue":s[4]||(s[4]=e=>y.value=e),doctype:"Contact",options:{hideAssign:!0}},null,8,["modelValue"])],64)}}};export{ke as _};
//# sourceMappingURL=ContactsListView-76da7066.js.map
