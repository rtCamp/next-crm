{"version":3,"file":"customers-8d8733e3.js","sources":["../../../../frontend/src/stores/customers.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { createResource } from 'frappe-ui'\nimport { reactive } from 'vue'\n\nexport const customersStore = defineStore('customers', () => {\n  let customersByName = reactive({})\n\n  const customers = createResource({\n    url: 'crm.api.session.get_customers',\n    cache: 'customers',\n    initialData: [],\n    auto: true,\n    transform(customers) {\n      for (let customer of customers) {\n        customerByName[customer.name] = customer\n      }\n      return customers\n    },\n    onError(error) {\n      if (error && error.exc_type === 'AuthenticationError') {\n        router.push('/login')\n      }\n    },\n  })\n\n  function getCustomer(name) {\n    return customersByName[name]\n  }\n\n  return {\n    customers,\n    getCustomer,\n  }\n})\n"],"names":["customersStore","defineStore","customersByName","reactive","customers","createResource","customer","error","getCustomer","name"],"mappings":"sDAIY,MAACA,EAAiBC,EAAY,YAAa,IAAM,CAC3D,IAAIC,EAAkBC,EAAS,EAAE,EAEjC,MAAMC,EAAYC,EAAe,CAC/B,IAAK,gCACL,MAAO,YACP,YAAa,CAAE,EACf,KAAM,GACN,UAAUD,EAAW,CACnB,QAASE,KAAYF,EACnB,eAAeE,EAAS,IAAI,EAAIA,EAElC,OAAOF,CACR,EACD,QAAQG,EAAO,CACTA,GAASA,EAAM,WAAa,uBAC9B,OAAO,KAAK,QAAQ,CAEvB,CACL,CAAG,EAED,SAASC,EAAYC,EAAM,CACzB,OAAOP,EAAgBO,CAAI,CAC5B,CAED,MAAO,CACL,UAAAL,EACA,YAAAI,CACD,CACH,CAAC"}