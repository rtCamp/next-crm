import{v as z,aE as R,j,b as r,g as y,w as f,d as P,u as g,aF as I,O as C,P as w,C as E,aa as G,H as A,t as k,e as c,n as O,c as u,F as _,f as M,p as B,Q as T,G as F,D as $,_ as q,cv as H,V as K,W as Q,aD as U,S as J,aW as X,l as L,i as N,r as W,q as Y}from"./index-8ca2d158.js";import{S as Z,i as ee,M as te,j as oe}from"./Dropdown.vue_vue_type_script_setup_true_lang-dba778cd.js";import{C as D}from"./index-b1bb6af7.js";const se={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-gray-500"},ie=["onClick"],re={class:"whitespace-nowrap"},ne={key:0,class:"border-t p-1.5"},Oe={__name:"Dropdown",props:{button:{type:Object,default:null},options:{type:Array,default:()=>[]},placement:{type:String,default:"left"}},setup(e){const o=e,a=z(),m=R(),v={enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"},t=j(()=>{var i;return((i=o.options[0])!=null&&i.group?o.options:[{group:"",items:o.options}]).map((p,h)=>({key:h,group:p.group,hideLabel:p.hideLabel||!1,items:x(p.items)}))}),l=j(()=>o.placement==="left"?"bottom-start":o.placement==="right"?"bottom-end":o.placement==="center"?"bottom-center":o.placement==="right-start"?"right-start":"bottom");function b(s){let i=s.onClick||null;return!i&&s.route&&a&&(i=()=>a.push(s.route)),{name:s.name,label:s.label,icon:s.icon,group:s.group,component:s.component,onClick:i}}function x(s){return(s||[]).filter(Boolean).filter(i=>i.condition?i.condition():!0).map(i=>b(i))}return(s,i)=>(r(),y(g(oe),{as:"div",class:"relative inline-block text-left"},{default:f(({open:p})=>[P(g(I),{transition:v,show:p,placement:l.value},{target:f(({togglePopover:h})=>[P(g(Z),{as:"template"},{default:f(()=>[s.$slots.default?C(s.$slots,"default",w(E({key:0},{open:p,togglePopover:h}))):(r(),y(g(G),E({key:1,active:p},e.button),{default:f(()=>{var n;return[A(k(e.button?((n=e.button)==null?void 0:n.label)||null:"Options"),1)]}),_:2},1040,["active"]))]),_:2},1024)]),body:f(()=>[c("div",{class:O(["rounded-lg bg-white shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"mt-2":["bottom","left","right"].includes(e.placement),"ml-2":e.placement=="right-start"}])},[P(g(ee),{class:O(["min-w-40 divide-y divide-gray-100",{"left-0 origin-top-left":e.placement=="left","right-0 origin-top-right":e.placement=="right","inset-x-0 origin-top":e.placement=="center","mt-0 origin-top-right":e.placement=="right-start"}])},{default:f(()=>[(r(!0),u(_,null,M(t.value,h=>(r(),u("div",{key:h.key,class:"p-1.5"},[h.group&&!h.hideLabel?(r(),u("div",se,k(h.group),1)):B("",!0),(r(!0),u(_,null,M(h.items,n=>(r(),y(g(te),{key:n.label},{default:f(({active:d})=>[C(s.$slots,"item",w(T({item:n,active:d})),()=>[n.component?(r(),y(F(n.component),{key:0,active:d},null,8,["active"])):(r(),u("button",{key:1,class:O([d?"bg-gray-100":"text-gray-800","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:n.onClick},[n.icon&&typeof n.icon=="string"?(r(),y(g($),{key:0,name:n.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-gray-700","aria-hidden":"true"},null,8,["name"])):n.icon?(r(),y(F(n.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-gray-700"})):B("",!0),c("span",re,k(n.label),1)],10,ie))])]),_:2},1024))),128))]))),128))]),_:3},8,["class"]),g(m).footer?(r(),u("div",ne,[C(s.$slots,"footer")])):B("",!0)],2)]),_:2},1032,["show","placement"])]),_:3}))}},ae={name:"Popover",inheritAttrs:!1,props:{show:{default:void 0},trigger:{type:String,default:"click"},hoverDelay:{type:Number,default:0},leaveDelay:{type:Number,default:0},placement:{type:String,default:"bottom-start"},popoverClass:[String,Object,Array],transition:{default:null},hideOnBlur:{default:!0}},emits:["open","close","update:show"],expose:["open","close"],data(){return{popoverContainerClass:"body-container",showPopup:!1,targetWidth:null,pointerOverTargetOrPopup:!1}},watch:{show(e){e?this.open():this.close()}},created(){if(!(typeof window>"u")&&!document.getElementById("frappeui-popper-root")){const e=document.createElement("div");e.id="frappeui-popper-root",document.body.appendChild(e)}},mounted(){this.listener=e=>{const o=e.target,a=this.$refs.reference,m=this.$refs.popover;if(o===a||o===m||(a==null?void 0:a.contains(o))||(m==null?void 0:m.contains(o)))return;if(!document.getElementById("frappeui-popper-root").contains(o))return this.close();const b=`.${this.popoverContainerClass}`,x=o==null?void 0:o.closest(b),s=a==null?void 0:a.closest(b);x&&s&&x===s&&this.close()},this.hideOnBlur&&(document.addEventListener("click",this.listener),document.addEventListener("mousedown",this.listener)),this.$nextTick(()=>{this.targetWidth=this.$refs.target.clientWidth})},beforeDestroy(){this.popper&&this.popper.destroy(),document.removeEventListener("click",this.listener),document.removeEventListener("mousedown",this.listener)},computed:{showPropPassed(){return this.show!=null},isOpen:{get(){return this.showPropPassed?this.show:this.showPopup},set(e){e=!!e,this.showPropPassed?this.$emit("update:show",e):this.showPopup=e,e===!1?this.$emit("close"):e===!0&&this.$emit("open")}},popupTransition(){let e={default:{enterActiveClass:"transition duration-150 ease-out",enterFromClass:"translate-y-1 opacity-0",enterToClass:"translate-y-0 opacity-100",leaveActiveClass:"transition duration-150 ease-in",leaveFromClass:"translate-y-0 opacity-100",leaveToClass:"translate-y-1 opacity-0"}};return typeof this.transition=="string"?e[this.transition]:this.transition}},methods:{setupPopper(){this.popper?this.updatePosition():this.popper=H(this.$refs.reference,this.$refs.popover,{placement:this.placement})},updatePosition(){this.popper&&this.popper.update()},togglePopover(e){e instanceof Event&&(e=null),e==null&&(e=!this.isOpen),e=!!e,e?this.open():this.close()},open(){this.isOpen=!0,this.$nextTick(()=>this.setupPopper())},close(){this.isOpen=!1},onMouseover(){this.pointerOverTargetOrPopup=!0,this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.trigger==="hover"&&(this.hoverDelay?this.hoverTimer=setTimeout(()=>{this.pointerOverTargetOrPopup&&this.open()},Number(this.hoverDelay)*1e3):this.open())},onMouseleave(e){this.pointerOverTargetOrPopup=!1,this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=null),this.trigger==="hover"&&(this.leaveTimer&&clearTimeout(this.leaveTimer),this.leaveDelay?this.leaveTimer=setTimeout(()=>{this.pointerOverTargetOrPopup||this.close()},Number(this.leaveDelay)*1e3):this.pointerOverTargetOrPopup||this.close())}}},le={ref:"reference"},ue={class:"rounded-lg border border-gray-100 bg-white shadow-xl"};function pe(e,o,a,m,v,t){return r(),u("div",le,[c("div",{ref:"target",class:O(["flex",e.$attrs.class]),onClick:o[0]||(o[0]=(...l)=>t.updatePosition&&t.updatePosition(...l)),onFocusin:o[1]||(o[1]=(...l)=>t.updatePosition&&t.updatePosition(...l)),onKeydown:o[2]||(o[2]=(...l)=>t.updatePosition&&t.updatePosition(...l)),onMouseover:o[3]||(o[3]=(...l)=>t.onMouseover&&t.onMouseover(...l)),onMouseleave:o[4]||(o[4]=(...l)=>t.onMouseleave&&t.onMouseleave(...l))},[C(e.$slots,"target",w(T({togglePopover:t.togglePopover,updatePosition:t.updatePosition,open:t.open,close:t.close,isOpen:t.isOpen})))],34),(r(),y(X,{to:"#frappeui-popper-root"},[c("div",{ref:"popover",class:O(["relative z-[100]",[v.popoverContainerClass,a.popoverClass]]),style:J({minWidth:v.targetWidth?v.targetWidth+"px":null}),onMouseover:o[5]||(o[5]=l=>v.pointerOverTargetOrPopup=!0),onMouseleave:o[6]||(o[6]=(...l)=>t.onMouseleave&&t.onMouseleave(...l))},[P(U,w(T(t.popupTransition)),{default:f(()=>[K(c("div",null,[C(e.$slots,"body",w(T({togglePopover:t.togglePopover,updatePosition:t.updatePosition,open:t.open,close:t.close,isOpen:t.isOpen})),()=>[c("div",ue,[C(e.$slots,"body-main",w(T({togglePopover:t.togglePopover,updatePosition:t.updatePosition,open:t.open,close:t.close,isOpen:t.isOpen})))])])],512),[[Q,t.isOpen]])]),_:3},16)],38)]))],512)}const ce=q(ae,[["render",pe]]),de={class:"text-base"},he={key:0,class:"flex items-center justify-center gap-2 rounded-full bg-white px-2 py-1 shadow-sm"},me=["onClick"],fe={key:1,class:"my-3 max-w-max transform bg-white px-4 sm:px-0"},ve={class:"relative max-h-96 overflow-y-auto rounded-lg pb-3 shadow-2xl ring-1 ring-black ring-opacity-5"},ge={class:"flex gap-2 px-3 pb-1 pt-3"},ye={class:"flex-1"},be=c("div",{class:"w-96"},null,-1),we={class:"sticky top-0 bg-white pb-2 pt-3 text-sm text-gray-700"},ke={class:"grid w-96 grid-cols-12 place-items-center"},Pe=["onClick","title"],_e={__name:"IconPicker",props:{modelValue:{},modelModifiers:{},reaction:{},reactionModifiers:{}},emits:["update:modelValue","update:reaction"],setup(e,{expose:o}){const a=L(""),m=N(e,"modelValue"),v=N(e,"reaction"),t=L(["👍","❤️","😂","😮","😢","🙏"]),l=j(()=>{let s={};for(let i of D){if(a.value&&![i.description,...i.names,...i.tags].join(" ").toLowerCase().includes(a.value.toLowerCase()))continue;let p=s[i.category];p||(s[i.category]=[],p=s[i.category]),p.push(i)}return Object.keys(s).length||(s["No results"]=[]),s});function b(){let s=D.length,i=x(0,s-1);m.value=D[i].emoji}function x(s,i){return Math.floor(Math.random()*(i-s+1)+s)}return o({setRandom:b}),(s,i)=>{const p=W("Button"),h=W("FormControl");return r(),y(ce,{transition:"default"},{target:f(({togglePopover:n,isOpen:d})=>[C(s.$slots,"default",w(T({isOpen:d,togglePopover:n})),()=>[c("span",de,k(e.modelValue||""),1)])]),body:f(({togglePopover:n})=>[v.value?(r(),u("div",he,[(r(!0),u(_,null,M(t.value,d=>(r(),u("div",{class:"size-5 cursor-pointer rounded-full bg-white text-xl",key:d,onClick:()=>(m.value=d)&&n()},[c("button",null,k(d),1)],8,me))),128)),P(p,{class:"rounded-full",icon:"plus",onClick:i[0]||(i[0]=Y(()=>v.value=!1,["stop"]))})])):(r(),u("div",fe,[c("div",ve,[c("div",ge,[c("div",ye,[P(h,{type:"text",placeholder:"Search by keyword",modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=d=>a.value=d),debounce:300},null,8,["modelValue"])]),P(p,{onClick:b},{default:f(()=>[A("Random")]),_:1})]),be,(r(!0),u(_,null,M(l.value,(d,V)=>(r(),u("div",{class:"px-3",key:V},[c("div",we,k(V),1),c("div",ke,[(r(!0),u(_,null,M(d,S=>(r(),u("button",{class:"h-8 w-8 rounded-md p-1 text-2xl hover:bg-gray-100 focus:outline-none focus:ring focus:ring-blue-200",key:S.description,onClick:()=>(m.value=S.emoji)&&n(),title:S.description},k(S.emoji),9,Pe))),128))])]))),128))])]))]),_:3})}}};export{ce as P,Oe as _,_e as a};
//# sourceMappingURL=IconPicker-b2d84813.js.map
