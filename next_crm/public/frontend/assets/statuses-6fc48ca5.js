import{j as M,b as d,c as p,g as B,w as z,e as k,d as N,u as f,t as R,F as A,f as I,n as V,p as F,N as j,y as C,L as y,B as E,z as O}from"./index-8ca2d158.js";import{b as $,_ as D}from"./index-b1bb6af7.js";import{I as _}from"./IndicatorIcon-367a8d49.js";const q={class:"flex items-center gap-2 text-base"},G={class:"truncate"},P={__name:"MultipleAvatar",props:{avatars:{type:Array,default:[]},size:{type:String,default:"md"}},setup(a){const u=a,g=M(()=>u.avatars.reverse());return(v,h)=>{var l,o,m;return(l=a.avatars)!=null&&l.length?(d(),p("div",{key:0,class:V(["mr-1.5 flex cursor-pointer items-center",[((o=a.avatars)==null?void 0:o.length)>1?"flex-row-reverse":"truncate [&>div]:truncate"]])},[((m=a.avatars)==null?void 0:m.length)==1?(d(),B(f(D),{key:0,text:a.avatars[0].name},{default:z(()=>[k("div",q,[N(f($),{shape:"circle",image:a.avatars[0].image,label:a.avatars[0].label,size:a.size},null,8,["image","label","size"]),k("div",G,R(a.avatars[0].label),1)])]),_:1},8,["text"])):(d(!0),p(A,{key:1},I(g.value,i=>(d(),B(f(D),{text:i.name,key:i.name},{default:z(()=>[N(f($),{class:"user-avatar -mr-1.5 transform ring-2 ring-white transition hover:z-10 hover:scale-110",shape:"circle",image:i.image,label:i.label,size:a.size,"data-name":i.name},null,8,["image","label","size","data-name"])]),_:2},1032,["text"]))),128))],2)):F("",!0)}}},Q=j("crm-statuses",()=>{let a=C({}),u=C({}),g=C({});const v=y({doctype:"CRM Lead Status",fields:["name","color","position"],orderBy:"position asc",cache:"lead-statuses",initialData:[],auto:!0,transform(e){for(let t of e)t.colorClass=o(t.color),t.iconColorClass=o(t.color,!0),a[t.name]=t;return e}}),h=y({doctype:"CRM Deal Status",fields:["name","color","position"],orderBy:"position asc",cache:"deal-statuses",initialData:[],auto:!0,transform(e){for(let t of e)t.colorClass=o(t.color),t.iconColorClass=o(t.color,!0),u[t.name]=t;return e}}),l=y({doctype:"CRM Communication Status",fields:["name"],cache:"communication-statuses",initialData:[],auto:!0,transform(e){for(let t of e)g[t.name]=t;return e}});function o(e,t=!1){let c=`!text-${e}-600`;e=="black"?c="!text-gray-900":["gray","green"].includes(e)&&(c=`!text-${e}-700`);let s=`!bg-${e}-100 hover:!bg-${e}-200 active:!bg-${e}-300`;return[c,t?"":s]}function m(e){return e||(e=v.data[0].name),a[e]}function i(e){return e||(e=h.data[0].name),u[e]}function L(e){return e||(e=l.data[0].name),l[e]}function w(e,t,c=[]){var S,x;let s=e=="deal"?u:a;c.length&&(s=c.reduce((r,n)=>(r[n]=s[n],r),{}));let b=[];for(const r in s)b.push({label:(S=s[r])==null?void 0:S.name,value:(x=s[r])==null?void 0:x.name,icon:()=>{var n;return E(_,{class:(n=s[r])==null?void 0:n.iconColorClass})},onClick:()=>{var n;O("status_changed",{doctype:e,status:r}),t&&t("status",(n=s[r])==null?void 0:n.name)}});return b}return{leadStatuses:v,dealStatuses:h,communicationStatuses:l,getLeadStatus:m,getDealStatus:i,getCommunicationStatus:L,statusOptions:w}});export{P as _,Q as s};
//# sourceMappingURL=statuses-6fc48ca5.js.map
